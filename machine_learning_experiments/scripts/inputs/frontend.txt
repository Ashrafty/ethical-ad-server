growing with the webprojectstop articlesexploreaboutsearch termsearch  getting around the mailto character limit published 14 july 2012   tags: javascript  i was faced with a problem recently where a web page needed to create an email with the user\u2019s email client. this is normally trivial, simply redirect the user to mailto:<emails>. the issues was that the maximum length of a url across different platforms is approximately 2000 characters, and the amount of emails required far exceeded that in some cases. so a solution would need to make multiple mailto requests.     here is the function i came up with:  function sendemails(emails) {   var timeout = 2000;   var mailtoprefix = 'mailto:?bcc=';   var maxurlcharacters = 1900;   var separator = ';';   var currentindex = 0;   var nextindex = 0;    if (emails.length < maxurlcharacters) {     window.location = mailtoprefix + emails;     return;   }    do {     currentindex = nextindex;     nextindex = emails.indexof(separator, currentindex + 1);   } while (nextindex != -1 && nextindex < maxurlcharacters)    if (currentindex == -1) {     window.location = mailtoprefix + emails;   } else {     window.location = mailtoprefix + emails.slice(0, currentindex);     settimeout(function () {       sendemails(emails.slice(currentindex + 1));     }, timeout);   } }   // usage var emails = 'a@a.com;b@b.com;c@c.com'; sendemails(emails);  you may have noticed in the code above i set a rather large timeout for opening email windows (2000ms). lower amounts seem to not create some of the emails, this is probably just a matter of outlook (what i was testing against) not accepting multiple at a time. an alternative solution for the whole problem, if mail client integration isn\u2019t required you can always of course fall back on the usual in page form that sends an email.  share this page more posts tagged javascript binary search tree red-black tree binary heap binomial heap fibonacci heap splay tree avl tree migrating xterm.js from tslint to eslint using the intersection observer web api to improve performance how to fix nvm slowing down terminal initialisation     like this article?subscribe for more! follow me\u00a9 2012-2022 daniel imms. all rights reserved.about | disclaimer | code license | third party licenses | sitemap
